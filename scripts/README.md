# Script descriptions

# Making_alt_allele_column.R 

This takes the file proportion_matched_all_info.txt and returns the same file, with a column that contains the first mutation at that position not seen in the 'observed' column

# R_summaries.R
Called during processing_summaries.sh, this counts the occurence of each unique variant type and outputs it to a file called 'added_results.txt' which can then be manually renamed

# counting_split_snp_muttypes.sh

To avoid crashing computers, run 
```bash
split -b 30G snp151_no_alts
```

Called as a part of the command

```bash
find ./split_snp_no_alts/* | parallel -j20 ./counting_split_snp_muttypes.sh
``` 

Simply takes two solumns, and sorts and counts the occurence of the columns and outputs them into a file

then run
```bash
cat snp_no_alts_muttypes.txt | sed 's/[0-9]*//g' | tr -d "[:blank:]" | sort | uniq -c >all_snps_muttypes.txt 
```


# generating_graph_info.sh 

This file creates a lot of the files needed to run the plotting_database_metrics.R script. Also needs to be run before generating the benign controls dataset. 

# make_VCFs.R

Used after everything has been generated to create VCFs from the .csv files ncVar_pathogenic.csv and ncVar_benign.csv. Called as part of make_vcf.sh 

# making_benign_set_freq_matched.R

This is for creating the benign dataset from the ncVar_pathogenic.csv and masked_over_5_all_snps_no_alts_info.txt files, will output a file called proportion_matched_benign.csv

# matching_clinvarids.R
To add to the x_ref column by matching clinvar IDs to the dbsnp IDs run 
```bash
cut -f11 -d, ./repo/ncVar_pathogenic.csv | sed 's/dbsnp:rs//g' | grep [0-9] >dbsnp_path
cut -f10,31 variant_summary.txt >clinvar_dbsnp_variantID
grep -w -f dbsnp_path clinvar_dbsnp_variantID | sort | uniq >matching_IDS
sed -i matching_IDS -e  's/^/dbsnp:rs/g' 
```
```R
dbsnp <- read.table("matching_IDS", header=T) 
path <- read.csv("./repo/ncVar_pathogenic.csv") 
library(dplyr)
write.csv(left_join(path, dbsnp),"matched_with_variants.csv") 
```
then run matching_clinvarids.R as it will collapse all the duplicate rows into one. The file "variant_summary.txt"  can be downloaded from 

ftp://ftp.ncbi.nlm.nih.gov/pub/clinvar/tab_delimited/variant_summary.txt.gz

# plotting_database_metrics.R 

Creates the graphs used in the publication. Takes files generated by other scripts and then graphs the output

# processing_summaries.sh

Creates summaries for the large snp151_no_alts file. Collapses the raw files into a file with unique mutation positions or types
